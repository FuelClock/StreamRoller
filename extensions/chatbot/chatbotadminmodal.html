<!--Modal HTML-->
<div class="modal-dialog modal-xl">
    <div class="modal-content bg-light text-dark">
        <div class="modal-header">
            <h5 class="modal-title">Chatbot Settings</h5>
            <button type="button" class="btn-close bg-light" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
            <div class="form-group invisible">
                <input type="hidden" name="extensionname" class="form-control" value="extensionnametext"
                    tabindex="-1" />
                <input type="hidden" name="modalcodetype" class="form-control" value="AdminModalCode" tabindex="-1" />
                <input type="hidden" name="modaldatatype" class="form-control" value="AdminModalData" tabindex="-1" />
                <input type="hidden" name="channel" class="form-control" value="channeltext" tabindex="-1" />
            </div>

            <p>Chatbot is a ChatGPT powered chatbot that can be asked questions or just hang out in chat talking with
                users.
            </p>

            <!-- fields for user interaction -->
            <!-- enable/disable chatbot -->
            <div class="form-group">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" name="chatbotenabled" type="checkbox" id="chatbotenabled"
                        chatbotenabledchecked>
                    <label class="form-check-label" for="chatbotenabled">Enable Chatbot (joins in the conversation in
                        chat)</label>
                </div>
            </div>
            <div class="form-group">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" name="questionbotenabled" type="checkbox" id="questionbotenabled"
                        questionbotenabledchecked>
                    <label class="form-check-label" for="questionbotenabled">Enable Questionbot (chat can ask questions
                        directly)</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-xs-1">
                    <label for="chatbotquerytag" class="">Message to directly ask a question in chat</label>
                    <input type="text" name="chatbotquerytag" id="chatbotquerytag" value="chatbotquerytagtext">
                    <input class="form-check-input" name="chatbotquerytagstartofline" type="checkbox"
                        id="chatbotquerytagstartofline" chatbotquerytagstartoflinechecked>
                    <label class="form-check-label" for="chatbotquerytagstartofline">Start of line only</label>
                </div>

            </div>

            <hr>
            <h5 class="modal-title">Activity level (how much the bot responds)</h5>
            Timeout for bot.
            <br>A random time will be selected between min and max, after chatting the bot will sleep for this random
            amount of time.
            <div class="form-group row">
                <div class="col-xs-1">
                    <label for="chatbotTimerMin" class="">Min (minutes) : </label>
                    <input type="text" name="chatbotTimerMin" id="chatbotTimerMin" value="chatbotTimerMintext">
                    <label for="chatbotTimerMax" class=""> Max (minutes) : </label>
                    <input type="text" name="chatbotTimerMax" id="chatbotTimerMax" value="chatbotTimerMaxtext">
                </div>
            </div>
            <br>Valid chat content per request
            <br>This is how many messages to send to the AI bot. ie 5 means collect the next 5 messages (after the
            timeout above)
            and send them to get a response

            <div class="form-group row">
                <div class="col-xs-1">
                    <label for="chatbotMessageMaxLines" class="">Num of messages : </label>
                    <input type="text" name="chatbotMessageMaxLines" id="chatbotMessageMaxLines"
                        value="chatbotMessageMaxLinestext">
                </div>
            </div>

            <br>How long should a message be before it is added to the list to send to the bot. Short messages 'hello',
            'nice one' or a Bttv emote (can't easily filter these out yet)
            don't make for such a good responce.
            <div class="form-group row">
                <div class="col-xs-1">
                    <label for="chatbotminmessagelength" class="">Minimum char length of a message</label>
                    <input type="text" name="chatbotminmessagelength" id="chatbotminmessagelength"
                        value="chatbotminmessagelengthtext">
                </div>
            </div>

            <hr>
            <h5 class="modal-title">Display</h5>
            Select an emote that is used at the start of each opanAI responce in chat to avoid confusion that these
            messages are from a real person
            <div class="form-group row">
                <div class="col-xs-1">
                    <label for="boticon" class="col-form-label">Emote : </label>
                    <input type="text" name="boticon" id="boticon" value="boticontext">
                </div>
            </div>
            <HR>


            <!-- ####################################################### -->
            <!--              behaviour and personalities                -->
            <!-- ####################################################### -->
            <div class="form-group row-2" class="form-control">
                <h4>Profile in use:<span style='color: yellow'> chatbotprofileselectedname</span></h4>
                <select class="selectpicker btn-secondary" data-style="btn-danger" data-width="150px" title="box one"
                    id="chatbotprofilepicker" name="chatbotprofilepicker" onchange="
                        let wc_i = this.selectedIndex; 
                        Array.apply(null,this.options).forEach(x => 
                        {
                            document.getElementById('chatbotprofile' + x.value+'profile').style.visibility ='hidden'
                            document.getElementById('chatbotprofile' + x.value+'profile').style.display ='none'
                        })
                        let selectedElement = document.getElementById('chatbotprofile' + this.options[wc_i].value+'profile')                    
                        selectedElement.style.visibility ='visible'
                        selectedElement.style.display ='block'
                " required>
                    <!--  onChange='add_img()' -->
                    <option value="0">chatbotprofile0nametext</option>
                    <option value="1">chatbotprofile1nametext</option>
                    <option value="2">chatbotprofile2nametext</option>
                    <option value="3">chatbotprofile3nametext</option>
                    <option value="4">chatbotprofile4nametext</option>
                </select>
            </div>

            <div class="form-group row-2" id="chatbotprofile0profile" style="chatbotprofile0profilevisibility">
                <label for="chatbotprofile0name" class="col-form-label">Name</label>
                <input type="text" name="chatbotprofile0name" class="form-control" value="chatbotprofile0nametext" />

                <label for="chatbotprofile0personality" class="col-form-label">Personality</label>
                <input type="text" name="chatbotprofile0personality" class="form-control"
                    value="chatbotprofile0personalitytext" />

                <label for="p0q1" class="col-form-label">Question 1</label>
                <input type="text" name="p0q1" class="form-control" value="p0q1text" />
                <label for="p0a1" class="col-form-label">Answer 1 </label>
                <input type="text" name="p0a1" class="form-control" id="p0a1" value="p0a1text">

                <label for="p0q2" class="col-form-label">Question 2</label>
                <input type="text" name="p0q2" class="form-control" value="p0q2text" />
                <label for="p0a2" class="col-form-label">Answer 2</label>
                <input type="text" name="p0a2" class="form-control" id="p0a2" value="p0a2text">

                <label for="p0q3" class="col-form-label">Question 3</label>
                <input type="text" name="p0q3" class="form-control" value="p0q3text" />
                <label for="p0a3" class="col-form-label">Answer 3</label>
                <input type="text" name="p0a3" class="form-control" id="p0a3" value="p0a3text">

                <label for="p0q4" class="col-form-label">Question 4</label>
                <input type="text" name="p0q4" class="form-control" value="p0q4text" />
                <label for="p0a4" class="col-form-label">Answer 4</label>
                <input type="text" name="p0a4" class="form-control" id="p0a4" value="p0a4text">
            </div>


            <div class="form-group row-2" id="chatbotprofile1profile" style="visibility: hidden; display:none">

                <label for="chatbotprofile1name" class="col-form-label">Profile Name</label>
                <input type="text" name="chatbotprofile1name" class="form-control" value="chatbotprofile1nametext" />

                <label for="chatbotprofile1personality" class="col-form-label">Personality</label>
                <input type="text" name="chatbotprofile1personality" class="form-control"
                    value="chatbotprofile1personalitytext" />

                <label for="p1q1" class="col-form-label">Question 1</label>
                <input type="text" name="p1q1" class="form-control" value="p1q1text" />
                <label for="p1a1" class="col-form-label">Answer 1 </label>
                <input type="text" name="p1a1" class="form-control" id="p1a1" value="p1a1text">

                <label for="p1q2" class="col-form-label">Question 2</label>
                <input type="text" name="p1q2" class="form-control" value="p1q2text" />
                <label for="p1a2" class="col-form-label">Answer 2</label>
                <input type="text" name="p1a2" class="form-control" id="p1a2" value="p1a2text">

                <label for="p1q3" class="col-form-label">Question 3</label>
                <input type="text" name="p1q3" class="form-control" value="p1q3text" />
                <label for="p1a3" class="col-form-label">Answer 3</label>
                <input type="text" name="p1a3" class="form-control" id="p1a3" value="p1a3text">

                <label for="p1q4" class="col-form-label">Question 4</label>
                <input type="text" name="p1q4" class="form-control" value="p1q4text" />
                <label for="p1a4" class="col-form-label">Answer 4</label>
                <input type="text" name="p1a4" class="form-control" id="p1a4" value="p1a4text">
            </div>

            <div class="form-group row-2" id="chatbotprofile2profile" style="visibility:hidden; display:none">

                <label for="chatbotprofile2name" class="col-form-label">Profile Name</label>
                <input type="text" name="chatbotprofile2name" class="form-control" value="chatbotprofile2nametext" />

                <label for="chatbotprofile2personality" class="col-form-label">Personality</label>
                <input type="text" name="chatbotprofile2personality" class="form-control"
                    value="chatbotprofile2personalitytext" />

                <label for="p2q1" class="col-form-label">Question 1</label>
                <input type="text" name="p2q1" class="form-control" value="p2q1text" />
                <label for="p2a1" class="col-form-label">Answer 1 </label>
                <input type="text" name="p2a1" class="form-control" id="p2a1" value="p2a1text">

                <label for="p2q2" class="col-form-label">Question 2</label>
                <input type="text" name="p2q2" class="form-control" value="p2q2text" />
                <label for="p2a2" class="col-form-label">Answer 2</label>
                <input type="text" name="p2a2" class="form-control" id="p2a2" value="p2a2text">

                <label for="p2q3" class="col-form-label">Question 3</label>
                <input type="text" name="p2q3" class="form-control" value="p2q3text" />
                <label for="p2a3" class="col-form-label">Answer 3</label>
                <input type="text" name="p2a3" class="form-control" id="p2a3" value="p2a3text">

                <label for="p2q4" class="col-form-label">Question 4</label>
                <input type="text" name="p2q4" class="form-control" value="p2q4text" />
                <label for="p2a4" class="col-form-label">Answer 4</label>
                <input type="text" name="p2a4" class="form-control" id="p2a4" value="p2a4text">
            </div>

            <div class="form-group row-2" id="chatbotprofile3profile" style="visibility:hidden; display:none">

                <label for="chatbotprofile3name" class="col-form-label">Profile Name</label>
                <input type="text" name="chatbotprofile3name" class="form-control" value="chatbotprofile3nametext" />

                <label for="chatbotprofile3personality" class="col-form-label">Personality</label>
                <input type="text" name="chatbotprofile3personality" class="form-control"
                    value="chatbotprofile3personalitytext" />

                <label for="p3q1" class="col-form-label">Question 1</label>
                <input type="text" name="p3q1" class="form-control" value="p3q1text" />
                <label for="p3a1" class="col-form-label">Answer 1 </label>
                <input type="text" name="p3a1" class="form-control" id="p3a1" value="p3a1text">

                <label for="p3q2" class="col-form-label">Question 2</label>
                <input type="text" name="p3q2" class="form-control" value="p3q2text" />
                <label for="p3a2" class="col-form-label">Answer 2</label>
                <input type="text" name="p3a2" class="form-control" id="p3a2" value="p3a2text">

                <label for="p3q3" class="col-form-label">Question 3</label>
                <input type="text" name="p3q3" class="form-control" value="p3q3text" />
                <label for="p3a3" class="col-form-label">Answer 3</label>
                <input type="text" name="p3a3" class="form-control" id="p3a3" value="p3a3text">

                <label for="p3q4" class="col-form-label">Question 4</label>
                <input type="text" name="p3q4" class="form-control" value="p3q4text" />
                <label for="p3a4" class="col-form-label">Answer 4</label>
                <input type="text" name="p3a4" class="form-control" id="p3a4" value="p3a4text">

            </div>

            <div class="form-group row-2" id="chatbotprofile4profile" style="visibility:hidden; display:none">

                <label for="chatbotprofile4name" class="col-form-label">Profile Name</label>
                <input type="text" name="chatbotprofile4name" class="form-control" value="chatbotprofile4nametext" />

                <label for="chatbotprofile4personality" class="col-form-label">Personality</label>
                <input type="text" name="chatbotprofile4personality" class="form-control"
                    value="chatbotprofile4personalitytext" />

                <label for="p4q1" class="col-form-label">Question 1</label>
                <input type="text" name="p4q1" class="form-control" value="p4q1text" />
                <label for="p4a1" class="col-form-label">Answer 1 </label>
                <input type="text" name="p4a1" class="form-control" id="p4a1" value="p4a1text">

                <label for="p4q2" class="col-form-label">Question 2</label>
                <input type="text" name="p4q2" class="form-control" value="p4q2text" />
                <label for="p4a2" class="col-form-label">Answer 2</label>
                <input type="text" name="p4a2" class="form-control" id="p4a2" value="p4a2text">

                <label for="p4q3" class="col-form-label">Question 3</label>
                <input type="text" name="p4q3" class="form-control" value="p4q3text" />
                <label for="p4a3" class="col-form-label">Answer 3</label>
                <input type="text" name="p4a3" class="form-control" id="p4a3" value="p4a3text">

                <label for="p4q4" class="col-form-label">Question 4</label>
                <input type="text" name="p4q4" class="form-control" value="p4q4text" />
                <label for="p4a4" class="col-form-label">Answer 4</label>
                <input type="text" name="p4a4" class="form-control" id="p4a4" value="p4a4text">
            </div>
            <!-- ####################################################### -->
            <!--          end behaviour and personalities                -->
            <!-- ####################################################### -->

            <HR>
            <h4 class="modal-title">Advanced options</h4>
            <h5 class="modal-title">Randomness (or temperature in OpenAI speak)</h5>
            <BR>Higher = more random/less precise
            <BR>Lower = less random/more precise
            <div class="form-group row-2 text-center">
                <label for="chattemperature" class="form-label">Chatbot Randomness</label>
                <label id="chattemperaturerangeval">chattemperaturetext</label>
                <input type="range" class="form-range" name="chattemperature" id="chattemperature" min="0" max="100"
                    step="1" onInput="$('#chattemperaturerangeval').html($(this).val())" value="chattemperaturetext">
            </div>
            <div class="form-group row-2 text-center ">
                <label for="questiontemperature" class="form-label">Direct Question Randomness</label>
                <label id="questiontemperaturerangeval">questiontemperaturetext</label>
                <input type="range" class="form-range" name="questiontemperature" id="questiontemperature" min="0"
                    max="100" step="1" onInput="$('#questiontemperaturerangeval').html($(this).val())"
                    value="questiontemperaturetext">
            </div>
            <h5 class="modal-title">Token Limit</h5>
            Limit the number of tokens used for the responce from OpenAI. Less tokens mean a shorter response. ~125
            tokens is around the max twitch chat lenght. Over this you will get multiple messages in chat.
            <div class="form-group row">
                <div class="col-xs-1">
                    <label for="maxtokenstouse" class="col-form-label">Max Tokens to use:</label>
                    <input type="text" name="maxtokenstouse" id="maxtokenstouse" value="maxtokenstousetext">
                </div>
            </div>

            <HR>
            <h5 class="modal-title">Debug</h5>
            Outputs some extra text in the console for help to tune things better.
            <div class="form-group">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" name="DEBUG_MODE" type="checkbox" id="DEBUG_MODE" DEBUG_MODEchecked>
                    <label class="form-check-label" for="DEBUG_MODE">Enable debug messages</label>
                </div>
            </div>
            <div class="form-group">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" name="restore_defaults" type="checkbox" id="restore_defaults"
                        restore_defaultschecked>
                    <label class="form-check-label" for="restore_defaults">Restore Defaults (requires server
                        restart)</label>
                </div>
            </div>



        </div>
        <!-- Standard footer with submit and cancel buttons -->
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" data-bs-dismiss="modal" class="btn btn-primary">Update</button>
        </div>
    </div>
</div>
<!-- END: -->